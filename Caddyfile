games.verma7.com {
    # Serve the landing page at root
    root * /home/abhishekverma/reader
    file_server

    # Global Auth
    handle /auth/* {
        reverse_proxy 127.0.0.1:3001
    }

    # Serve Phonics Reader
    handle_path /reader/* {
        root * /home/abhishekverma/reader/reader/frontend/dist
        file_server
        try_files {path} /index.html
    }

    # Serve Washing Machine game
    handle_path /washing-machine/* {
        root * /home/abhishekverma/reader/washing-machine/dist
        file_server
        try_files {path} /index.html
    }

    # Serve US Map game
    handle_path /us-map-game/* {
        root * /home/abhishekverma/reader/us-map-game/dist
        file_server
        try_files {path} /index.html
    }

    # Serve World Map game
    handle_path /world-map-game/* {
        root * /home/abhishekverma/reader/world-map-game/dist
        file_server
        try_files {path} /index.html
    }

    # Serve Food Classification game
    handle_path /food-classification-game/* {
        root * /home/abhishekverma/reader/food-classification-game/dist
        file_server
        try_files {path} /index.html
    }

    # Serve Puzzle game
    # Serve Puzzle game
    handle /puzzle-game* {
        uri strip_prefix /puzzle-game

        # Proxy API requests to backend server
        handle /api/* {
            reverse_proxy 127.0.0.1:3001
        }
        
        # Serve static frontend files for everything else
        handle {
            root * /home/abhishekverma/reader/puzzle-game/dist
            try_files {path} /index.html
            file_server
        }
    }
}
