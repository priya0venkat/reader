import{r as t,j as i,u as V}from"./index-Bn7O6o8G.js";import{c as B}from"./confetti.module-oQXWb4Lk.js";import{M as G,i as _,u as D,P as U,a as q,b as K,L as F,m as L}from"./proxy-BTCnpPhl.js";function H(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function X(...s){return r=>{let o=!1;const c=s.map(u=>{const n=H(u,r);return!o&&typeof n=="function"&&(o=!0),n});if(o)return()=>{for(let u=0;u<c.length;u++){const n=c[u];typeof n=="function"?n():H(s[u],null)}}}}function J(...s){return t.useCallback(X(...s),s)}class Q extends t.Component{getSnapshotBeforeUpdate(r){const o=this.props.childRef.current;if(o&&r.isPresent&&!this.props.isPresent){const c=o.offsetParent,u=_(c)&&c.offsetWidth||0,n=this.props.sizeRef.current;n.height=o.offsetHeight||0,n.width=o.offsetWidth||0,n.top=o.offsetTop,n.left=o.offsetLeft,n.right=u-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:s,isPresent:r,anchorX:o,root:c}){const u=t.useId(),n=t.useRef(null),g=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=t.useContext(G),S=J(n,s?.ref);return t.useInsertionEffect(()=>{const{width:d,height:v,top:l,left:p,right:m}=g.current;if(r||!n.current||!d||!v)return;const y=o==="left"?`left: ${p}`:`right: ${m}`;n.current.dataset.motionPopId=u;const f=document.createElement("style");j&&(f.nonce=j);const k=c??document.head;return k.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${v}px !important;
            ${y}px !important;
            top: ${l}px !important;
          }
        `),()=>{k.contains(f)&&k.removeChild(f)}},[r]),i.jsx(Q,{isPresent:r,childRef:n,sizeRef:g,children:t.cloneElement(s,{ref:S})})}const Z=({children:s,initial:r,isPresent:o,onExitComplete:c,custom:u,presenceAffectsLayout:n,mode:g,anchorX:j,root:S})=>{const d=D(ee),v=t.useId();let l=!0,p=t.useMemo(()=>(l=!1,{id:v,initial:r,isPresent:o,custom:u,onExitComplete:m=>{d.set(m,!0);for(const y of d.values())if(!y)return;c&&c()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[o,d,c]);return n&&l&&(p={...p}),t.useMemo(()=>{d.forEach((m,y)=>d.set(y,!1))},[o]),t.useEffect(()=>{!o&&!d.size&&c&&c()},[o]),g==="popLayout"&&(s=i.jsx(Y,{isPresent:o,anchorX:j,root:S,children:s})),i.jsx(U.Provider,{value:p,children:s})};function ee(){return new Map}const $=s=>s.key||"";function W(s){const r=[];return t.Children.forEach(s,o=>{t.isValidElement(o)&&r.push(o)}),r}const te=({children:s,custom:r,initial:o=!0,onExitComplete:c,presenceAffectsLayout:u=!0,mode:n="sync",propagate:g=!1,anchorX:j="left",root:S})=>{const[d,v]=q(g),l=t.useMemo(()=>W(s),[s]),p=g&&!d?[]:l.map($),m=t.useRef(!0),y=t.useRef(l),f=D(()=>new Map),[k,P]=t.useState(l),[w,R]=t.useState(l);K(()=>{m.current=!1,y.current=l;for(let x=0;x<w.length;x++){const h=$(w[x]);p.includes(h)?f.delete(h):f.get(h)!==!0&&f.set(h,!1)}},[w,p.length,p.join("-")]);const T=[];if(l!==k){let x=[...l];for(let h=0;h<w.length;h++){const M=w[h],N=$(M);p.includes(N)||(x.splice(h,0,M),T.push(M))}return n==="wait"&&T.length&&(x=T),R(W(x)),P(l),null}const{forceRender:b}=t.useContext(F);return i.jsx(i.Fragment,{children:w.map(x=>{const h=$(x),M=g&&!d?!1:l===w||p.includes(h),N=()=>{if(f.has(h))f.set(h,!0);else return;let z=!0;f.forEach(I=>{I||(z=!1)}),z&&(b?.(),R(y.current),g&&v?.(),c&&c())};return i.jsx(Z,{isPresent:M,initial:!m.current||o?void 0:!1,custom:r,presenceAffectsLayout:u,mode:n,root:S,onExitComplete:M?void 0:N,anchorX:j,children:x},h)})})},O=[{id:"apple",emoji:"ðŸŽ",name:"Apple"},{id:"cookie",emoji:"ðŸª",name:"Cookie"},{id:"chocolate",emoji:"ðŸ«",name:"Chocolate"},{id:"strawberry",emoji:"ðŸ“",name:"Strawberry"},{id:"pizza",emoji:"ðŸ•",name:"Pizza"},{id:"donut",emoji:"ðŸ©",name:"Donut"},{id:"icecream",emoji:"ðŸ¦",name:"Ice Cream"},{id:"cake",emoji:"ðŸ°",name:"Cake"}];function re(){const s=V(),[r,o]=t.useState(10),[c,u]=t.useState(1),[n,g]=t.useState(O[0]),[j,S]=t.useState([]),[d,v]=t.useState([]),[l,p]=t.useState(!1),[m,y]=t.useState(null),[f,k]=t.useState(!1),[P,w]=t.useState(null);t.useEffect(()=>{const e=()=>{const a=window.speechSynthesis.getVoices(),C=a.find(A=>A.lang.startsWith("en"))||a[0];w(C)};e(),window.speechSynthesis.onvoiceschanged=e},[]);const R=e=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(e);P&&(a.voice=P),a.rate=1,a.pitch=1.1,a.onerror=C=>console.error("Speech Error:",C),window.speechSynthesis.speak(a)},T=()=>{k(!0),R("Let's go!"),x()},b=e=>{const a=new Set([e]);for(;a.size<3;){let C=Math.floor(Math.random()*r)+1;C!==e&&a.add(C)}return Array.from(a).sort(()=>Math.random()-.5)},x=()=>{const e=Math.floor(Math.random()*r)+1,a=O[Math.floor(Math.random()*O.length)],C=b(e);u(e),g(a),v(C),p(!1),y(null);const A=Array.from({length:e},(se,E)=>({id:Date.now()+E,x:35*Math.sqrt(E+1)*Math.cos(E*2.39996),y:35*Math.sqrt(E+1)*Math.sin(E*2.39996)}));S(A),setTimeout(()=>{R(`Let's eat ${a.name}s!`)},500)},h=e=>{l||(z(),S(a=>a.filter(C=>C.id!==e)))},M=e=>{l||(e===c?N(e):(y(e),setTimeout(()=>y(null),500)))},N=e=>{p(!0),B({particleCount:100,spread:70,origin:{y:.6}}),I(),setTimeout(()=>{R(`That is right! There were ${e} ${n.name}s!`)},1e3),setTimeout(x,5e3)},z=()=>{new Audio("https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3").play().catch(a=>console.log("Audio play failed",a))},I=()=>{new Audio("https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3").play().catch(a=>console.log("Audio play failed",a))};return i.jsxs("div",{className:"game-container",children:[i.jsxs("header",{children:[i.jsx("button",{onClick:()=>s("/"),className:"home-btn",children:"ðŸ "}),i.jsxs("h1",{children:["How many ",n.name,"s?"]})]}),!f&&i.jsxs("div",{className:"start-overlay",children:[i.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem"},children:"Counting Game"}),i.jsxs("div",{style:{marginBottom:"2rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[i.jsxs("label",{style:{fontSize:"1.5rem",marginBottom:"1rem",color:"#ffcc00"},children:["Maximum Number: ",r]}),i.jsx("input",{type:"range",min:"5",max:"30",value:r,onChange:e=>o(parseInt(e.target.value)),style:{width:"300px",cursor:"pointer"}})]}),i.jsx("button",{onClick:T,className:"start-button",children:"Start Playing â–¶ï¸"})]}),i.jsxs("main",{children:[i.jsx("div",{className:"plate-area",children:i.jsx("div",{className:`plate ${l?"success":""}`,children:i.jsx(te,{children:j.map(e=>i.jsx(L.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},whileHover:{scale:1.2,cursor:"pointer"},whileTap:{scale:.9},className:"plate-item",onClick:()=>h(e.id),style:{fontSize:"4rem",position:"absolute",left:`calc(50% + ${e.x}px)`,top:`calc(50% + ${e.y}px)`,transform:"translate(-50%, -50%)"},children:n.emoji},e.id))})})}),i.jsx("div",{className:"options-container",children:d.map(e=>i.jsx(L.button,{className:`option-button ${m===e?"shake":""}`,whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>M(e),animate:m===e?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},children:e},e))})]}),l&&i.jsx(L.div,{className:"success-message",initial:{y:50,opacity:0},animate:{y:0,opacity:1},children:i.jsxs("h2",{style:{fontSize:"2.5rem",margin:0},children:["Correct! That's ",c,"! ðŸŽ‰"]})})]})}export{re as default};
